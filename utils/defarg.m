function defarg( arg, val )% DEFARG  Assign a default value to an argument.%% defarg( arg, val )%     - <arg> is the string name of the argument%     - <val> is the value to be assigned to <arg> if it doesn't exist%% e.g., defarg( 'arg1', -1 )%       defarg( 'arg2', 'none' )% 18/02/98 - created (RFM)% 20/02/98 - added ability to handle fields of structures (RFM)% 26/09/98 - fixed to handle vectors (JMG)% 17/05/17 - fixed to handle arrays (TBC ...weird this hasn't come up before.)% This could be cleaned up a lot.p = strfind(arg,'.');if isempty(p) %==0,	if evalin('caller',sprintf('exist(''%s'',''var'') && ~isempty(%s)',arg,arg))==0,			if ischar(val),			evalin('caller',sprintf('%s=''%s'';',arg,val));		else			evalin('caller',sprintf('%s=''%s'';',arg,mat2str(val)));  %num2str(val)));			evalin('caller',sprintf('%s=str2num(%s);',arg,arg))		end	endelse    p = p(1);	f1=arg(1:p-1);	f2=arg(p+1:end);	baseexists=evalin('caller',sprintf('exist(''%s'',''var'')',f1));	if baseexists,		fieldexists=evalin('caller',sprintf('isfield(%s,''%s'') && ~isempty(%s)',f1,f2, arg));	else		fieldexists=0;	end	if ~( baseexists && fieldexists ),		if ischar(val),			evalin('caller',sprintf('%s=''%s'';',arg,val));		else			evalin('caller',sprintf('%s=%f;',arg,val));		end	endendend %main function